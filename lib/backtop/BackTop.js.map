{"version":3,"sources":["../../dev/mtui/backtop/BackTop.jsx"],"names":["BackTop","props","state","show","timer","scrollEventHand","that","top","document","documentElement","scrollTop","body","self","getScrollTop","time","x","fps","setInterval","setScrollTop","clearInterval","callBack","scrollTopFun","removeEventListener","visibilityHeight","e","setState","addEventListener","dom","Component","type","children","other","handleClick","bind","display","className","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA;;;;AACA;;;;;;AAXA;;;;;;;;;;IAaMA,O;;;AACF,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA,4IACTA,KADS;;AAEf,cAAKC,KAAL,GAAa;AACTC,kBAAM;AADG,SAAb;AAGA,cAAKC,KAAL,GAAa,IAAb;AACA,cAAKC,eAAL,GAAuB,IAAvB;AANe;AAOlB;;;;qCAOYC,I,EAAM;AACf,gBAAIC,MAAM,IAAV;AACA,gBAAI,CAACD,IAAL,EAAW;AACPC,sBAAMC,SAASC,eAAT,CAAyBC,SAAzB,IAAsCF,SAASG,IAAT,CAAcD,SAA1D;AACH,aAFD,MAEO;AACHH,sBAAMD,KAAKI,SAAX;AACH;AACD,mBAAOH,GAAP;AACH;;;qCAEYD,I,EAAMC,G,EAAK;AACpB,gBAAID,SAAS,UAAb,EAAyB;AACrB,oBAAIE,SAASG,IAAT,CAAcD,SAAlB,EAA6B;AACzBF,6BAASG,IAAT,CAAcD,SAAd,GAA0BH,GAA1B;AACH;AACD,oBAAIC,SAASC,eAAT,CAAyBC,SAA7B,EAAwC;AACpCF,6BAASC,eAAT,CAAyBC,SAAzB,GAAqCH,GAArC;AACH;AACJ,aAPD,MAOO;AACHD,qBAAKI,SAAL,GAAiBH,GAAjB;AACH;AACJ;;;uCAEc;AACX,gBAAIK,OAAO,IAAX;AACA,gBAAIL,MAAM,KAAKM,YAAL,EAAV;AACAN,kBAAMA,MAAMK,KAAKX,KAAL,CAAWM,GAAvB;AACA,gBAAIO,OAAOF,KAAKX,KAAL,CAAWa,IAAtB,CAJW,CAIiB;AAC5B,gBAAIC,IAAI,EAAR,CALW,CAKC;AACZ,gBAAIC,MAAMD,IAAID,IAAJ,GAAWP,GAArB,CANW,CAMe;;AAE1B,iBAAKH,KAAL,GAAaa,YAAY,YAAY;AACjCV,uBAAOQ,CAAP;AACA,oBAAIR,OAAOK,KAAKX,KAAL,CAAWM,GAAtB,EAA2B;AACvBA,0BAAMK,KAAKX,KAAL,CAAWM,GAAjB;AACAK,yBAAKM,YAAL,CAAkB,UAAlB,EAA8BX,GAA9B;AACAY,kCAAcP,KAAKR,KAAnB;AACH,iBAJD,MAIO;AACHQ,yBAAKM,YAAL,CAAkB,UAAlB,EAA8BX,GAA9B;AACH;AACJ,aATY,EASVS,GATU,CAAb;AAWH;;;sCAEa;AACV,gBAAI,KAAKf,KAAL,CAAWmB,QAAf,EAAyB;AACrB,qBAAKnB,KAAL,CAAWmB,QAAX;AACH;AACD,iBAAKC,YAAL;AACH;;;+CAEsB;AACnBb,qBAASc,mBAAT,CAA6B,QAA7B,EAAuC,KAAKjB,eAA5C;AACH;;;4CAEmB;AAChB,gBAAIO,OAAO,IAAX;AACA,gBAAI,KAAKX,KAAL,CAAWsB,gBAAf,EAAiC;AAC7B,qBAAKlB,eAAL,GAAuB,UAAUmB,CAAV,EAAa;AAChC,wBAAIZ,KAAKC,YAAL,MAAuBD,KAAKX,KAAL,CAAWsB,gBAAtC,EAAwD;AACpDX,6BAAKa,QAAL,CAAc;AACVtB,kCAAM;AADI,yBAAd;AAGH,qBAJD,MAIO;AACHS,6BAAKa,QAAL,CAAc;AACVtB,kCAAM;AADI,yBAAd;AAGH;AACJ,iBAVD;AAWAK,yBAASkB,gBAAT,CAA0B,QAA1B,EAAoC,KAAKrB,eAAzC;AACH,aAbD,MAaO;AACHO,qBAAKa,QAAL,CAAc;AACVtB,0BAAM;AADI,iBAAd;AAGH;AAEJ;;;iCAEQ;AACL,gBAAIwB,MAAM,IAAV;AACA,gBAAI,KAAK1B,KAAL,CAAW0B,GAAf,EAAoB;AAChB,oBAAIC,YAAY,KAAK3B,KAAL,CAAW0B,GAAX,CAAeE,IAA/B;AADgB,uCAEa,KAAK5B,KAAL,CAAW0B,GAAX,CAAe1B,KAF5B;AAAA,oBAEV6B,QAFU,oBAEVA,QAFU;AAAA,oBAEGC,KAFH;;AAGhBJ,sBAAM;AAAC,6BAAD;AAAA,6CAAW,SAAS,KAAKK,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAApB,IAAqDF,KAArD;AAA6DD;AAA7D,iBAAN;AACH,aAJD,MAIO;AACHH,sBAAM;AAAA;AAAA,sBAAG,OAAO,EAAEO,SAAS,KAAKhC,KAAL,CAAWC,IAAX,GAAkB,OAAlB,GAA4B,MAAvC,EAAV,EAA2D,SAAS,KAAK6B,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAApE,EAAiG,WAAW,CAAC,KAAKhC,KAAL,CAAWkC,SAAX,IAAwB,EAAzB,IAA+B,aAA3I;AAAA;AAAA,iBAAN;AACH;AACD,mBAAOR,GAAP;AACH;;;;;AAvGC3B,O,CAUKoC,Y,GAAe;AAClB7B,SAAK,CADa;AAElBO,UAAM;AAFY,C;eAgGXd,O;;;;;;;;;kCA1GTA,O","file":"BackTop.js","sourcesContent":["/**\r\n* @type 返回顶部\r\n* @author : Mantou\r\n* @props :\r\n* \ttop 滚动到顶部的距离\r\n* \ttime 滚动动画时间\r\n* \tvisibilityHeight 滚动高度达到此参数值才出现 \r\n* \tcallBack 回调函数\r\n* \tdom 可以传入一个DOM，就不浮动了\r\n*/\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nclass BackTop extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false\r\n        };\r\n        this.timer = null;\r\n        this.scrollEventHand = null;\r\n    }\r\n\r\n    static defaultProps = {\r\n        top: 0,\r\n        time: 1000\r\n    }\r\n\r\n    getScrollTop(that) {\r\n        let top = null;\r\n        if (!that) {\r\n            top = document.documentElement.scrollTop || document.body.scrollTop;\r\n        } else {\r\n            top = that.scrollTop;\r\n        }\r\n        return top;\r\n    }\r\n\r\n    setScrollTop(that, top) {\r\n        if (that === 'document') {\r\n            if (document.body.scrollTop) {\r\n                document.body.scrollTop = top;\r\n            }\r\n            if (document.documentElement.scrollTop) {\r\n                document.documentElement.scrollTop = top;\r\n            }\r\n        } else {\r\n            that.scrollTop = top;\r\n        }\r\n    }\r\n\r\n    scrollTopFun() {\r\n        var self = this;\r\n        var top = this.getScrollTop();\r\n        top = top - self.props.top;\r\n        var time = self.props.time; //\r\n        var x = 10; // 每次位移\r\n        var fps = x * time / top; // 时间段\r\n\r\n        this.timer = setInterval(function () {\r\n            top -= x;\r\n            if (top <= self.props.top) {\r\n                top = self.props.top;\r\n                self.setScrollTop('document', top);\r\n                clearInterval(self.timer);\r\n            } else {\r\n                self.setScrollTop('document', top);\r\n            }\r\n        }, fps);\r\n\r\n    }\r\n\r\n    handleClick() {\r\n        if (this.props.callBack) {\r\n            this.props.callBack();\r\n        }\r\n        this.scrollTopFun();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('scroll', this.scrollEventHand);\r\n    }\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        if (this.props.visibilityHeight) {\r\n            this.scrollEventHand = function (e) {\r\n                if (self.getScrollTop() >= self.props.visibilityHeight) {\r\n                    self.setState({\r\n                        show: true\r\n                    });\r\n                } else {\r\n                    self.setState({\r\n                        show: false\r\n                    });\r\n                }\r\n            };\r\n            document.addEventListener('scroll', this.scrollEventHand);\r\n        } else {\r\n            self.setState({\r\n                show: true\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        let dom = null;\r\n        if (this.props.dom) {\r\n            var Component = this.props.dom.type;\r\n            var { children, ...other } = this.props.dom.props;\r\n            dom = <Component onClick={this.handleClick.bind(this)} {...other}>{children}</Component>;\r\n        } else {\r\n            dom = <a style={{ display: this.state.show ? 'block' : 'none' }} onClick={this.handleClick.bind(this)} className={(this.props.className || '') + ' mt-backtop'}>Top</a>;\r\n        }\r\n        return dom;\r\n    }\r\n}\r\n\r\nexport default BackTop;"]}